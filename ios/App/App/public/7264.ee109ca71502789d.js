"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7264],{7264:(k,f,r)=>{r.r(f),r.d(f,{PopisLokacijaPageModule:()=>_});var m=r(7829),d=r(7222),l=r(888),u=r(7569),p=r(2882),e=r(4303),c=r(656),P=r(3095),b=r(1681);function C(t,s){if(1&t){const a=e.RV6();e.j41(0,"ion-item",13)(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-toggle",14),e.mxI("ngModelChange",function(n){const i=c.eBV(a).$implicit;return e.DH7(i.enabled,n)||(i.enabled=n),c.Njj(n)}),e.bIt("ionChange",function(){const n=c.eBV(a).$implicit,i=e.XpG(2);return c.Njj(i.onCityToggle(n))}),e.k0s()()}if(2&t){const a=s.$implicit,o=e.XpG(2);e.R7$(2),e.JRh(a.name),e.R7$(),e.R50("ngModel",a.enabled),e.Y8G("disabled",o.isAllMode())}}function j(t,s){if(1&t&&(e.j41(0,"ion-accordion",9)(1,"ion-item",10)(2,"ion-label")(3,"strong"),e.EFF(4),e.k0s()()(),e.j41(5,"div",11),e.DNE(6,C,4,3,"ion-item",12),e.k0s()()),2&t){const a=s.$implicit;e.Y8G("value",e.mNQ(a.name)),e.R7$(4),e.JRh(a.name),e.R7$(2),e.Y8G("ngForOf",a.cities)}}let h=(()=>{var t;class s{constructor(o,n){this.router=o,this.locationService=n,this.countries=[]}ngOnInit(){this.loadCountries()}loadCountries(){this.locationService.getCountries().subscribe({next:o=>{const n=o.filter(i=>i.title);this.countries=n.map((i,g)=>({id:String(g+1),name:i.title,cities:[]})),this.countries.forEach(i=>{this.loadCitiesForCountry(i)})},error:o=>console.error("Countries error:",o)})}loadCitiesForCountry(o){this.locationService.getCities(o.id).subscribe({next:n=>{o.cities=n.filter(i=>i.title).map((i,g)=>({id:g+1,name:i.title,enabled:this.isAllMode()||this.isCitySelected(i.title)}))},error:n=>console.error(`Cities error for ${o.name}:`,n)})}onCityToggle(o){o.loading=!0,(o.enabled?this.locationService.addUserLocation(o.name):this.locationService.removeUserLocation(o.name)).subscribe({next:()=>{o.loading=!1,o.enabled?this.saveSelectedCity(o.name):this.removeSelectedCity(o.name),this.isAllMode()&&localStorage.setItem("locationMode","selected")},error:()=>{o.enabled=!o.enabled,o.loading=!1}})}isAllMode(){return"all"===localStorage.getItem("locationMode")}saveSelectedCity(o){const n=JSON.parse(localStorage.getItem("selectedCities")||"[]");n.includes(o)||(n.push(o),localStorage.setItem("selectedCities",JSON.stringify(n)))}removeSelectedCity(o){const i=JSON.parse(localStorage.getItem("selectedCities")||"[]").filter(g=>g!==o);localStorage.setItem("selectedCities",JSON.stringify(i)),0===i.length&&localStorage.setItem("locationMode","all")}isCitySelected(o){return JSON.parse(localStorage.getItem("selectedCities")||"[]").includes(o)}navigateTo(o){this.router.navigate([`/${o}`])}}return(t=s).\u0275fac=function(o){return new(o||t)(e.rXU(P.Ix),e.rXU(b.N))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-popis-lokacija"]],decls:23,vars:10,consts:[[3,"value",4,"ngFor","ngForOf"],[1,"space"],[1,"footer-button","home-button",3,"click"],[1,"footer-btn-container"],["src","assets/home.png","alt","home icon",1,"footer-icon"],[1,"footer-button","list-button",3,"click"],["src","assets/list.png","alt","list icon",1,"footer-icon"],[1,"footer-button",3,"click"],["src","assets/profil.png","alt","profil icon",1,"footer-icon"],[3,"value"],["slot","header","color","light"],["slot","content"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","end","color","success",3,"ngModelChange","ionChange","ngModel","disabled"]],template:function(o,n){1&o&&(e.j41(0,"ion-content")(1,"ion-accordion-group"),e.DNE(2,j,7,4,"ion-accordion",0),e.k0s(),e.nrm(3,"div",1),e.k0s(),e.j41(4,"ion-footer")(5,"ion-button",2),e.bIt("click",function(){return n.navigateTo("home")}),e.j41(6,"div",3),e.nrm(7,"img",4),e.j41(8,"p"),e.EFF(9),e.nI1(10,"translate"),e.k0s()()(),e.j41(11,"ion-button",5),e.bIt("click",function(){return n.navigateTo("popis")}),e.j41(12,"div",3),e.nrm(13,"img",6),e.j41(14,"p"),e.EFF(15),e.nI1(16,"translate"),e.k0s()()(),e.j41(17,"ion-button",7),e.bIt("click",function(){return n.navigateTo("profil")}),e.j41(18,"div",3),e.nrm(19,"img",8),e.j41(20,"p"),e.EFF(21),e.nI1(22,"translate"),e.k0s()()()()),2&o&&(e.R7$(2),e.Y8G("ngForOf",n.countries),e.R7$(7),e.JRh(e.bMT(10,4,"HOME")),e.R7$(6),e.JRh(e.bMT(16,6,"LIST")),e.R7$(6),e.JRh(e.bMT(22,8,"PROFILE")))},dependencies:[m.MD,m.Sq,l.bv,l.xk,l.YH,l.Jm,l.W9,l.M0,l.uz,l.he,l.BY,l.hB,d.YN,d.BC,d.vS,p.h,p.D9],styles:["ion-content[_ngcontent-%COMP%]{padding:0;margin:0;overflow:hidden;font-family:Roboto}.title[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;border:1px solid #92949c;border-radius:15px;padding:1rem;margin-left:1rem;margin-top:2rem;width:90%}h1[_ngcontent-%COMP%]{text-align:center;color:#5f5f5f}h2[_ngcontent-%COMP%]{color:#5f5f5f}.wrapper[_ngcontent-%COMP%]{margin-right:1.3rem;border-bottom:1px solid rgb(133,132,132);width:50%}.card-img[_ngcontent-%COMP%]{height:4vh;margin:0 1rem}.notification[_ngcontent-%COMP%]{margin:1rem;box-shadow:none;display:flex;align-items:center;justify-content:space-between;padding:.5rem}.notification-status[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:.9rem;margin:1rem 0}.space[_ngcontent-%COMP%]{margin:1rem 0}ion-footer[_ngcontent-%COMP%]{box-shadow:none;background-color:#f0f0f0;height:5rem;padding:1rem 0;position:absolute;bottom:0;left:0;right:0;display:flex;justify-content:center;align-items:center}.footer-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;padding:.5rem}.footer-button[_ngcontent-%COMP%]{--background: transparent;--box-shadow: none;margin:0}.home-button[_ngcontent-%COMP%], .list-button[_ngcontent-%COMP%]{border-right:2px solid #ffffff}.footer-icon[_ngcontent-%COMP%]{height:10vmin}p[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;color:#000;font-size:.7rem;text-transform:none}"]}),s})();const v=[{path:"",component:h}];let M=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=c.G2t({imports:[u.iI.forChild(v),u.iI]}),s})(),_=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=c.G2t({imports:[h,m.MD,d.YN,l.bv,M]}),s})()}}]);