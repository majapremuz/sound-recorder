"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8738],{8738:(C,p,i)=>{i.r(p),i.d(p,{PopisPageModule:()=>O});var c=i(7829),f=i(7222),r=i(888),g=i(7569),m=i(3308),n=i(4303),u=i(656),P=i(65),h=i(1701);function y(t,s){1&t&&(n.j41(0,"p",10),n.EFF(1,"Nema zvukova na popisu"),n.k0s())}function b(t,s){if(1&t){const a=n.RV6();n.j41(0,"ion-item")(1,"ion-label")(2,"p"),n.EFF(3),n.k0s()(),n.j41(4,"ion-button",11),n.bIt("click",function(){const e=u.eBV(a).$implicit,l=n.XpG();return u.Njj(l.playAudio(e))}),n.nrm(5,"img",12),n.k0s()()}if(2&t){const a=s.$implicit;n.R7$(3),n.JRh(a.name),n.R7$(2),n.Y8G("src",a.isPlaying?"assets/pause-icon.png":"assets/play-icon.png",n.B4B)}}let d=(()=>{var t;class s{constructor(o,e){this.http=o,this.router=e,this.audios=[],this.audioPlayer=new Audio,this.currentAudio=null}ngOnInit(){this.loadAudios(),this.audioPlayer.addEventListener("ended",()=>{this.currentAudio&&(this.currentAudio.isPlaying=!1,this.currentAudio=null)})}loadAudios(){var o=this;return(0,m.A)(function*(){try{const e=yield o.http.get("https://traffic-call.com/api/filelist.php").toPromise();console.log("Raw response from server:",e),Array.isArray(e)?o.audios=e.map(l=>({name:l.title||l.filename,url:`https://traffic-call.com/files/${l.filename}`,isPlaying:!1})):(console.warn("Unexpected response format:",e),o.audios=[])}catch(e){console.error("Failed to load audios:",e),o.audios=[]}})()}playAudio(o){this.currentAudio!==o?(this.currentAudio&&(this.currentAudio.isPlaying=!1,this.audioPlayer.pause()),this.audioPlayer.src=o.url,this.audioPlayer.play(),o.isPlaying=!0,this.currentAudio=o):o.isPlaying?(this.audioPlayer.pause(),o.isPlaying=!1):(this.audioPlayer.play(),o.isPlaying=!0)}navigateTo(o){this.router.navigate([`/${o}`])}}return(t=s).\u0275fac=function(o){return new(o||t)(n.rXU(P.Qq),n.rXU(h.Ix))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-popis"]],decls:20,vars:3,consts:[[3,"fullscreen"],["class","no-audios",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"footer-button","home-button",3,"click"],[1,"footer-btn-container"],["src","assets/home.png","alt","home icon",1,"footer-icon"],[1,"footer-button","list-button",3,"click"],["src","assets/list.png","alt","list icon",1,"footer-icon"],[1,"footer-button",3,"click"],["src","assets/profil.png","alt","profil icon",1,"footer-icon"],[1,"no-audios"],[1,"play-button",3,"click"],[1,"play-icon",3,"src"]],template:function(o,e){1&o&&(n.j41(0,"ion-content",0)(1,"ion-list"),n.DNE(2,y,2,0,"p",1)(3,b,6,2,"ion-item",2),n.k0s()(),n.j41(4,"ion-footer")(5,"ion-button",3),n.bIt("click",function(){return e.navigateTo("home")}),n.j41(6,"div",4),n.nrm(7,"img",5),n.j41(8,"p"),n.EFF(9,"Po\u010detni ekran"),n.k0s()()(),n.j41(10,"ion-button",6),n.bIt("click",function(){return e.navigateTo("popis")}),n.j41(11,"div",4),n.nrm(12,"img",7),n.j41(13,"p"),n.EFF(14,"Popis objava"),n.k0s()()(),n.j41(15,"ion-button",8),n.bIt("click",function(){return e.navigateTo("profil")}),n.j41(16,"div",4),n.nrm(17,"img",9),n.j41(18,"p"),n.EFF(19,"Korisni\u010dki profil"),n.k0s()()()()),2&o&&(n.Y8G("fullscreen",!0),n.R7$(2),n.Y8G("ngIf",0===e.audios.length),n.R7$(),n.Y8G("ngForOf",e.audios))},dependencies:[c.MD,c.Sq,c.bT,r.bv,r.Jm,r.W9,r.M0,r.uz,r.he,r.nf],styles:["ion-item[_ngcontent-%COMP%]{--background: #ebebeb;width:90%;--border-radius: 8px;margin:1rem auto}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:.8rem}.item-inner[_ngcontent-%COMP%]{padding:.3rem}ion-list[_ngcontent-%COMP%]{max-height:80vh;overflow-y:auto}.play-button[_ngcontent-%COMP%]{--background: transparent;--box-shadow: none}.play-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:10vmin}.no-audios[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;font-family:Open Sans,sans-serif}ion-footer[_ngcontent-%COMP%]{background-color:#fff;box-shadow:none;border-top:2px solid #cacaca;padding:1rem 0;position:absolute;bottom:0;left:0;right:0;display:flex;justify-content:center;align-items:center}.footer-btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;padding:.5rem}.footer-button[_ngcontent-%COMP%]{--background: transparent;--box-shadow: none;margin:0}.home-button[_ngcontent-%COMP%], .list-button[_ngcontent-%COMP%]{border-right:2px solid #cacaca}.play-icon[_ngcontent-%COMP%]{font-size:28px;transition:transform .2s ease,color .2s ease}.play-icon[name=play-circle][_ngcontent-%COMP%]{background:url(play-icon.9d86d7145dcea8df.png)}.play-icon[name=pause-circle][_ngcontent-%COMP%]{background:url(pause-icon.86c113cd1fdfed93.png);transform:scale(1.1)}.footer-icon[_ngcontent-%COMP%]{height:10vmin}p[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;color:#000;font-size:.7rem;text-transform:none}"]}),s})();const v=[{path:"",component:d}];let M=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=u.G2t({imports:[g.iI.forChild(v),g.iI]}),s})(),O=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=u.G2t({imports:[d,c.MD,f.YN,r.bv,M]}),s})()}}]);